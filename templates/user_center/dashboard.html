{% extends "user_center/base.html" %}
{% load static %}
{% block title %}User Center{% endblock %}
{% block content %}

    <style>
        .dashboard-card { transition: transform .15s ease, box-shadow .15s ease; }
        .dashboard-card:hover { transform: translateY(-4px); box-shadow: 0 .75rem 1.5rem rgba(0,0,0,.08); }
        .icon-circle { width: 64px; height: 64px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.6rem; }
        .icon-primary { color: #0d6efd; background: linear-gradient(145deg, #eff6ff, #f7fbff); border: 1px solid rgba(13,110,253,.08); }
        .icon-success { color: #198754; background: linear-gradient(145deg, #eefaf4, #f6fdf9); border: 1px solid rgba(25,135,84,.08); }
        .icon-warning { color: #fd7e14; background: linear-gradient(145deg, #fff6ec, #fffbf6); border: 1px solid rgba(253,126,20,.12); }
        .icon-info { color: #0dcaf0; background: linear-gradient(145deg, #ecfbff, #f6feff); border: 1px solid rgba(13,202,240,.12); }
        .metric { font-weight: 700; font-size: 1.25rem; }
        .dashboard-hero { background: linear-gradient(135deg, #f8fbff 0%, #f4f9ff 60%, #f8fff9 100%); }
        .quick-tile { border: 1px solid rgba(0,0,0,.06); transition: background .15s ease, transform .1s ease; }
        .quick-tile:hover { background: #f8f9fa; transform: translateY(-2px); }
    </style>

    <nav class="mt-2" aria-label="breadcrumb">
        <ol class="breadcrumb small">
            <li class="breadcrumb-item"><a href="{% url 'user_center:dashboard' %}" class="text-decoration-none">User Center</a></li>
            <li class="breadcrumb-item active" aria-current="page">Dashboard</li>
        </ol>
    </nav>

    <div class="card border-0 dashboard-hero overflow-hidden mt-3">
        <div class="card-body p-4 p-md-5">
            <div class="d-flex flex-column flex-md-row align-items-start align-items-md-center justify-content-between gap-3">
                <div>
                    <h4 class="mb-1">Welcome back</h4>
                    <p class="text-muted mb-0">Create, manage, and track your gene synthesis orders.</p>
                </div>
                <div class="d-flex gap-2">
                    <a href="{% url 'user_center:order_create' %}" class="btn btn-primary"><i class="bi bi-plus-circle me-1"></i>Create New Order</a>
                    <a href="{% url 'user_center:view_cart' %}" class="btn btn-outline-secondary"><i class="bi bi-cart3 me-1"></i>View Cart</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Metrics -->
    <div class="row g-4 mt-1">
        <!-- Cart items -->
        <div class="col-12 col-md-6 col-xl-4">
            <div class="card h-100 dashboard-card">
                <div class="card-body d-flex justify-content-between align-items-center p-4">
                    <div class="d-flex align-items-center gap-3">
                        <div class="icon-circle icon-success position-relative">
                            <i class="bi bi-cart3"></i>
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success">
                                {{ gene_number_in_cart|default:"0" }}
                            </span>
                        </div>
                        <div>
                            <div class="text-muted small">Items in Cart</div>
                            <div class="metric">{{ gene_number_in_cart|default:"0" }}</div>
                        </div>
                    </div>
                    <a href="{% url 'user_center:view_cart' %}" class="btn btn-outline-success btn-sm">Open</a>
                </div>
            </div>
        </div>

        <!-- Orders in production -->
        <div class="col-12 col-md-6 col-xl-4">
            <div class="card h-100 dashboard-card">
                <div class="card-body d-flex justify-content-between align-items-center p-4">
                    <div class="d-flex align-items-center gap-3">
                        <div class="icon-circle icon-warning position-relative">
                            <i class="bi bi-gear-wide-connected"></i>
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-warning text-dark">
                                {{ order_number_in_production|default:"0" }}
                            </span>
                        </div>
                        <div>
                            <div class="text-muted small">In Production</div>
                            <div class="metric">{{ order_number_in_production|default:"0" }}</div>
                        </div>
                    </div>
                    <a href="{% url 'user_center:manage_order' %}" class="btn btn-outline-warning btn-sm">Track</a>
                </div>
            </div>
        </div>

        <!-- Shipped/Completed orders (fallback 0) -->
        <div class="col-12 col-md-6 col-xl-4">
            <div class="card h-100 dashboard-card">
                <div class="card-body d-flex justify-content-between align-items-center p-4">
                    <div class="d-flex align-items-center gap-3">
                        <div class="icon-circle icon-info position-relative">
                            <i class="bi bi-truck"></i>
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-info text-dark">
                                {{ order_number_in_shipment|default:"0" }}
                            </span>
                        </div>
                        <div>
                            <div class="text-muted small">Shipped</div>
                            <div class="metric">{{ order_number_in_shipment|default:"0" }}</div>
                        </div>
                    </div>
                    <a href="{% url 'user_center:manage_order' %}" class="btn btn-outline-info btn-sm">View</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick actions -->
    <div class="card mt-4">
        <div class="card-header bg-white">
            <strong>Quick Actions</strong>
        </div>
        <div class="card-body">
            <div class="row row-cols-2 row-cols-md-4 g-3">
                <div class="col">
                    <a href="{% url 'user_center:order_create' %}" class="text-decoration-none">
                        <div class="quick-tile rounded p-3 h-100 d-flex align-items-center gap-3">
                            <i class="bi bi-plus-circle text-primary fs-4"></i>
                            <div>
                                <div class="fw-semibold">New Order</div>
                                <div class="text-muted small">Submit your sequence</div>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col">
                    <a href="{% url 'user_center:manage_order' %}" class="text-decoration-none">
                        <div class="quick-tile rounded p-3 h-100 d-flex align-items-center gap-3">
                            <i class="bi bi-list-check text-warning fs-4"></i>
                            <div>
                                <div class="fw-semibold">Manage Orders</div>
                                <div class="text-muted small">Track progress</div>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col">
                    <a href="{% url 'user_center:manage_vector' %}" class="text-decoration-none">
                        <div class="quick-tile rounded p-3 h-100 d-flex align-items-center gap-3">
                            <i class="bi bi-diagram-3 text-success fs-4"></i>
                            <div>
                                <div class="fw-semibold">Manage Vectors</div>
                                <div class="text-muted small">Upload and download</div>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col">
                    <a href="{% url 'tools:tools_list' %}" class="text-decoration-none">
                        <div class="quick-tile rounded p-3 h-100 d-flex align-items-center gap-3">
                            <i class="bi bi-tools text-info fs-4"></i>
                            <div>
                                <div class="fw-semibold">Analysis Tools</div>
                                <div class="text-muted small">Sequence utilities</div>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
